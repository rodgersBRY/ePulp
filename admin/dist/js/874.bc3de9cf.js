"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[874],{4874:function(t,e,a){a.r(e),a.d(e,{default:function(){return w}});var r=a(8762),s=a(9582),i=a(4886),n=a(9202),o=a(4324),l=a(644),c=a(1088),d=a(8718),h=a(2033),u=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"farmer-details"}},[e("main",{staticClass:"farmer"},[e("section",{staticClass:"main-section"},[e(s.Z,{staticClass:"py-4 px-8 mx-auto",attrs:{width:"65%",color:"grey lighten-4",flat:""}},[e(c.Z,{attrs:{justify:"space-between"}},[e(o.Z,{attrs:{size:"190"}},[t._v("mdi-badge-account")]),e("div",{staticClass:"user-details"},[e(i.EB,{staticClass:"mb-3"},[e("span",[t._v("Name:")]),t._v(" "+t._s(t.farmer.fullName))]),e(i.ZB,[e("span",{staticStyle:{"font-weight":"bold"}},[t._v("Telephone:")]),t._v(" "+t._s(t.farmer.phoneNumber))]),e(i.ZB,[e("span",{staticStyle:{"font-weight":"bold"}},[t._v("A/C No:")]),t._v(" "+t._s(t.farmer.accountNo))]),e(i.ZB,[e("span",{staticStyle:{"font-weight":"bold"}},[t._v("Total weight:")]),t._v(" "+t._s(t.farmer.totalWeight)+" Kgs")])],1)],1)],1),e(c.Z,{staticClass:"my-10",attrs:{"no-gutters":""}},[e(d.Z),e(r.Z,{attrs:{text:"",color:"green",disabled:t.newBatchDialog},on:{click:function(e){t.newBatchDialog=!0}}},[e(o.Z,[t._v("mdi-plus")]),t._v(" New Batch")],1),e(n.Z,{attrs:{width:"400px"},model:{value:t.successDialog,callback:function(e){t.successDialog=e},expression:"successDialog"}},[e(s.Z,{staticClass:"text-center pa-4"},[e(o.Z,{attrs:{size:"100",color:"green"}},[t._v("mdi-check-circle-outline")]),e(i.ZB,{staticClass:"mt-3"},[t._v("Successfully added")]),e(i.h7,[e(d.Z),e(r.Z,{attrs:{text:"",block:""},on:{click:function(e){t.successDialog=!1}}},[t._v("close")])],1)],1)],1),e("error-dialog",{attrs:{display:t.error,"error-text":t.error},on:{"close-dialog":t.resetError}})],1),e("div",{staticClass:"pa-5"},[e("form",{directives:[{name:"show",rawName:"v-show",value:t.newBatchDialog,expression:"newBatchDialog"}],on:{submit:function(e){return e.preventDefault(),t.addNewCoffeeDelivery.apply(null,arguments)}}},[e(i.EB,[t._v(" Enter the coffee quantity ")]),e(h.Z,{attrs:{autofocus:"",outlined:"",label:"Weight",color:"brown"},model:{value:t.weight,callback:function(e){t.weight=e},expression:"weight"}}),e(i.h7,[e(d.Z),e(r.Z,{attrs:{depressed:"",outlined:"",text:"",color:"red"},on:{click:function(e){t.newBatchDialog=!1}}},[t._v("Cancel")]),e(r.Z,{attrs:{depressed:"",outlined:"",text:"",color:"green",type:"submit",loading:t.isLoading}},[t._v("Add")])],1)],1)]),e("div",{staticClass:"deliveries"},[e(s.Z,{staticClass:"py-4 px-2"},[e("h2",[t._v("Individual Deliveries")]),e("br"),t.isLoading?e(l.Z,{attrs:{indeterminate:"",color:"brown darken-2"}}):e("table",[e("thead",[e("tr",[e("th",[t._v("Weight")]),e("th",[t._v("Date of Delivery")])])]),0==t.paginatedData.length?e("div",[e("p",{staticClass:"grey--text"},[t._v("No data found")])]):e("tbody",t._l(t.paginatedData,(function(a){return e("tr",{key:a._id},[e("td",[t._v(t._s(a.coffeeWeight)+" Kgs")]),e("td",[t._v(t._s(t._f("dateFilter")(a.dateOfDelivery)))])])})),0)]),e("div",{staticClass:"pagination"},[e(r.Z,{attrs:{icon:"",outlined:"",disabled:1===t.currentPage},on:{click:t.previousPage}},[e(o.Z,[t._v("mdi-arrow-left")])],1),e("span",{staticClass:"mx-4"},[t._v(t._s(t.currentPage))]),e(r.Z,{attrs:{icon:"",outlined:"",disabled:t.currentPage===t.totalPages},on:{click:t.nextPage}},[e(o.Z,[t._v("mdi-arrow-right")])],1)],1)],1)],1)],1)])])},g=[],f=a(629),m={name:"farmer-details",data(){return{farmerId:this.$route.params.farmerId,currentPage:1,itemsPerPage:5,weight:"",newBatchDialog:!1,successDialog:!1}},created(){this.$store.dispatch("fetchFarmer",this.farmerId)},filters:{dateFilter(t){if(t){var e=new Date(t).toLocaleString("en-US",{day:"2-digit",month:"short",year:"numeric"});return e}}},computed:{...(0,f.Se)(["farmers","farmer","isLoading","error"]),farmerData(){return this.farmer.coffeeBatches},totalPages(){return Math.ceil(this.farmerData.length/this.itemsPerPage)},paginatedData(){const t=(this.currentPage-1)*this.itemsPerPage,e=t+this.itemsPerPage;return this.farmerData.slice(t,e)}},methods:{...(0,f.nv)(["updateFarmersQuantity","setError","clearError"]),async addNewCoffeeDelivery(){""!=this.weight?(await this.updateFarmersQuantity({id:this.farmerId,weight:this.weight}),this.weight="",this.newBatchDialog=!1,this.successDialog=!0,this.$store.dispatch("fetchFarmer",this.farmerId)):this.setError("Cannot submit an empty field")},previousPage(){this.currentPage>1&&this.currentPage--},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},resetError(){this.clearError()}}},v=m,p=a(1001),_=(0,p.Z)(v,u,g,!1,null,"083ec4d4",null),w=_.exports}}]);
//# sourceMappingURL=874.bc3de9cf.js.map