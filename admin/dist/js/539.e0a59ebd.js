"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[539],{9539:function(e,t,r){r.r(t),r.d(t,{default:function(){return v}});var a=r(8762),s=r(9582),o=r(4324),i=r(644),n=r(1088),l=r(8718),c=r(2033),u=(r(7658),function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"farmers"}},[t(s.Z,{staticClass:"mx-auto mt-11",attrs:{flat:"",width:"60%"}},[t("div",{staticClass:"user-ops d-flex justify-space-between"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],attrs:{type:"text",name:"search",id:"search",placeholder:"Search..."},domProps:{value:e.searchQuery},on:{input:function(t){t.target.composing||(e.searchQuery=t.target.value)}}}),t(a.Z,{attrs:{outlined:"",text:"",color:"brown",disabled:e.dialog},on:{click:function(t){e.dialog=!0}}},[t(o.Z,[e._v("mdi-plus")]),e._v("New Farmer")],1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.dialog,expression:"dialog"}],staticClass:"new-farmer-form"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.addNewFarmer.apply(null,arguments)}}},[t(c.Z,{attrs:{autofocus:"",dense:"",outlined:"",label:"Full Name",type:"text",color:"brown"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),t(c.Z,{attrs:{dense:"",outlined:"",label:"Account Number",type:"number",color:"brown"},model:{value:e.accountNo,callback:function(t){e.accountNo=t},expression:"accountNo"}}),t(c.Z,{attrs:{dense:"",outlined:"",label:"Phone Number",type:"tel",color:"brown"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),t(c.Z,{attrs:{dense:"",outlined:"",label:"Password",type:"password",color:"brown"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t("div",{staticClass:"pa-3"},[t(n.Z,{attrs:{"no-gutters":""}},[t(l.Z),t(a.Z,{attrs:{text:"",color:"red"},on:{click:e.closeDialog}},[e._v("Cancel")]),t(a.Z,{staticClass:"ml-2",attrs:{type:"submit",depressed:"",color:"green",dark:"",loading:e.isLoading}},[e._v("Save")])],1)],1),t("error-dialog",{attrs:{display:e.error,"error-text":e.error},on:{"close-dialog":e.resetError}})],1)]),e.isLoading?t(i.Z,{attrs:{indeterminate:"",color:"brown darken-2"}}):t("table",[t("thead",[t("tr",[t("th",[e._v("Membership No")]),t("th",[e._v("Full Name")]),t("th",[e._v("Phone Number")]),t("th",[e._v("Total Weight (Kgs)")])])]),0===e.paginatedData.length?t("div",[t("p",{staticClass:"grey--text"},[e._v("No farmers on the system")])]):t("tbody",e._l(e.paginatedData,(function(r){return t("tr",{key:r.membershipNo,on:{click:function(t){return e.$router.push(`/farmers/${r._id}`)}}},[t("td",[e._v(e._s(r.membershipNo))]),t("td",[e._v(e._s(r.fullName))]),t("td",[e._v(e._s(r.phoneNumber))]),t("td",[e._v(e._s(r.totalWeight))])])})),0)]),t("div",{staticClass:"pagination"},[t(a.Z,{attrs:{icon:"",outlined:"",disabled:1===e.currentPage},on:{click:e.previousPage}},[t(o.Z,[e._v("mdi-arrow-left")])],1),e._l(e.displayedPages,(function(r){return t("span",{key:r},[t("button",{class:{active:r===e.currentPage},on:{click:function(t){return e.changePage(r)}}},[e._v(e._s(r))])])})),t(a.Z,{attrs:{icon:"",outlined:"",disabled:e.currentPage===e.totalPages},on:{click:e.nextPage}},[t(o.Z,[e._v("mdi-arrow-right")])],1)],2)],1)],1)}),d=[],h=r(629),m={name:"Farmers",data(){return{currentPage:1,itemsPerPage:10,searchQuery:"",dialog:!1,name:"",phone:"",password:"",accountNo:""}},created(){this.$store.dispatch("fetchFarmers")},computed:{...(0,h.Se)(["farmers","isLoading","error"]),totalPages(){return Math.ceil(this.farmers.length/this.itemsPerPage)},filteredData(){if(""==this.searchQuery)return this.farmers;const e=this.searchQuery.toLowerCase();return this.farmers.filter((t=>Object.values(t).some((t=>String(t).toLowerCase().includes(e)))))},paginatedData(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredData.slice(e,t)},displayedPages(){const e=2,t=this.currentPage,r=this.totalPages;let a=Math.max(t-e,1),s=Math.min(t+e,r);return r>2*e+1&&(t<=e?s=2*e+1:t>=r-e&&(a=r-2*e)),Array.from({length:s-a+1},((e,t)=>a+t))}},methods:{...(0,h.nv)(["clearError","setError"]),closeDialog(){this.dialog=!1,this.name="",this.phone="",this.password="",this.accountNo=""},resetError(){this.clearError()},async addNewFarmer(){if(""!=this.name||""!=this.phone||""!=this.password||""!=this.accountNo){const e={fullName:this.name,phoneNumber:this.phone,accountNo:this.accountNo,password:this.password};await this.$store.dispatch("newFarmer",e),this.$store.dispatch("fetchFarmers"),this.closeDialog()}else this.setError("All fields should be <br/> filled before submitting")},previousPage(){this.currentPage>1&&this.currentPage--},changePage(e){this.currentPage=e},nextPage(){this.currentPage<this.totalPages&&this.currentPage++}}},p=m,g=r(1001),f=(0,g.Z)(p,u,d,!1,null,"56cfd92a",null),v=f.exports}}]);
//# sourceMappingURL=539.e0a59ebd.js.map